#!/bin/bash

# Check if the correct number of arguments are provided
if [ $# -ne 2 ]; then
  echo "Usage: $0 <directory> <scale_percentage>"
  echo "Example: $0 ./images 50"
  exit 1
fi

# Get the directory and scale factor from arguments
DIR=$1
SCALE=$2

# Check if the provided directory exists
if [ ! -d "$DIR" ]; then
  echo "Error: Directory $DIR does not exist."
  exit 1
fi

# Loop through all image files in the directory
for img in "$DIR"/*.{jpg,jpeg,png,gif,bmp,tiff}; do
  # Skip if no images are found
  if [ ! -f "$img" ]; then
    continue
  fi

  echo "Resizing $img by $SCALE%..."

  # Use convert to downscale the image by the scale factor
  magick "$img" -resize "$SCALE%" "$img"
done

echo "All images have been resized."

