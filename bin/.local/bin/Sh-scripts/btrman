#!/bin/bash

# Check if an argument is provided
if [ $# -eq 0 ]; then
    echo "Usage: $0 <command>"
    exit 1
fi

# Command to fetch the man page content
MANPAGE=$(man "$1" | col -bx) # Use col -bx to handle special formatting characters

# Check if man page was found
if [ $? -ne 0 ]; then
    echo "No manual entry for $1"
    exit 1
fi

# Create a temporary file to hold the man page
TMPFILE=$(mktemp /tmp/manvim.XXXXXX)

# Save the man page content to the temporary file
echo "$MANPAGE" > "$TMPFILE"

# Open the file in nvim with syntax highlighting
nvim -c "set syntax=man" "$TMPFILE"

# Clean up the temporary file when done
rm -f "$TMPFILE"

Instead of bash can you do this in luajit
